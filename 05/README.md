# 第 5 章 虚拟机的安装和使用

|本期版本|上期版本|
|:---:|:---:|
|`Tue Jan  2 13:06:43 CST 2024`| -

## 5.1 计算机的启动过程

### 5.1.2 计算机的加电和复位

* 对于 Intel 8086 来说，复位将使代码段寄存器(CS)的内容为 `0xFFFF`, 其他所有寄存器的内容为 `0x0000`
* **8086 之后的处理器并未延续这种设计**

### 5.1.3 基本输入输出系统

* ROM 不需要刷新，它的内容是预先写入的，即使掉电也不会消失
* ROM 占据着整个内存空间顶端64KB
* 处理器取指令的自然顺序是从内存的低地址往高地址推进
* ROM中位于物理地址`0xFFFF0`的地方，通常是一个跳转指令，它通过改变CS和IP的内容，使处理器从ROM中较低的地址处开始取指令执行

### 5.1.4 硬盘及其工作原理

* 盘片、磁头、磁道、柱面、扇区
* 转速: 转/分(Round Per Minute, RPM)
* 每个扇区都有一个编号，与磁头和磁道不同，扇区的编号是从1开始的
* 扇区与扇区之间以间隙（空白）间隔开来，每个扇区以扇区头开始，然后是512字节的数据区


### 5.1.5 一切从主引导扇区开始

* 硬盘的第一个扇区是 0 面 0 道 1 扇区，或者说是 0 头 0 柱 1 扇区，这个扇区称为 `主引导扇区`
* ROM-BIOS 将读取主引导扇区的内容，将它加载到内存地址  `0x0000:0x7c00`

```nasm
jmp 0x0000:0x7c00
```

### 5.2.3 虚拟硬盘简介

* 硬盘的读写是以扇区为最小单位的。（至少得是1个扇区）

### 5.2.4 联系使用 FixVhdWr 工具向虚拟硬盘写入数据

* `dd` 替代
* 通常，一个扇区的尺寸是512字节